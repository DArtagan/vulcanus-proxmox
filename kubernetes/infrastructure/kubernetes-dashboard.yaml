apiVersion: source.toolkit.fluxcd.io/v1beta2
kind: HelmRepository
metadata:
  name: kubernetes-dashboard
spec:
  interval: 24h
  url: https://kubernetes.github.io/dashboard/


---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: kubernetes-dashboard
spec:
  interval: 5m
  chart:
    spec:
      chart: kubernetes-dashboard
      sourceRef:
        kind: HelmRepository
        name: kubernetes-dashboard
        version: 6.0.8
      interval: 5m
  values:
    app:
      ingress:
        host: kubernetes.immortalkeep.com
        ingressClassName: traefik-internal
        secretName: kubernetes-dashboard-ingress-tls
        issuer: letsencrypt
        paths:
          web: /
          api: /api
    cert-manager:
      enabled: false
      installCRDs: false
    nginx:
      enabled: false
    metrics-server:
      enabled: true
      args:
        - --kubelet-preferred-address-types=InternalIP
        - --kubelet-insecure-tls
